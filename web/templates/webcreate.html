{% extends "base.html" %}
{% block head %}
    {{ super() }}
    <script>
    setInterval(function(){ 
            $("#playertitle").load(" #playertitle"); 
            $("#chatbar").load(" #chatbar"); 
            $("#buttons").load(" #buttons");
            $("#playerinfo").load(" #playerinfo");
        }, 60000);
        </script>


{% endblock %}

{% block content %}
    {% if alertmessage %}
    <script>
    bulmaToast.toast(  {
        message: "<h1 class='subtitle is-uppercase'>{{ playerinfo['playername'].title() }} {{ alertmessage }}</h1>",
    duration: 10000,
    type: "is-danger",
    position: "center",
    closeOnClick: true,
    opacity: 0.9
  })
    </script>
    {% endif %}

<div id="playertitle">
    {% if ui_isbanned(playerinfo['steamid']) %}
    <div class='container is-mobile has-background-danger bottom-pad-10'>
    {% elif ui_isplayeronline(playerinfo['steamid']) %}
    <div class='container is-mobile has-background-success bottom-pad-10'>
    {% elif ui_isplayerold(playerinfo['steamid']) %}
    <div class='container is-mobile has-background-black bottom-pad-10'>
    {% else %}
    <div class='container is-mobile has-background-grey bottom-pad-10'>
    {% endif %}
    <div>
        <h1 class='title is-mobile top-pad-10 left-pad has-text-white'>&nbsp;{{ playerinfo['playername'].title() }}</h1>
        <h2 class='subtitle is-mobile left-pad has-text-white'>&nbsp;&nbsp;Active: {{ ui_playerlastactive(playerinfo['lastseen']) }}</h2>
    </div>
</div>
<div class='container is-mobile top-pad-10 left-pad right-pad'>
    <div id="playerinfo">
        <p class='is-2'>Steam ID: <b>{{ playerinfo['steamid'].title() }}</b></p>
        <p class='is-2'>Discord ID: <b>{{ playerinfo['discordid'].title() }}</b></p>
    </div>
</div>

<div class='container is-mobile top-pad-10 left-pad right-pad'>
    <form action="/webcreate/{{ playerinfo['steamid'] }}" method="POST">
            <div class="container top-pad-10">
                <div class="control">
                    <input class="input is-rounded" type="text" name="email" placeholder="email address">
                </div>
            </div>
            <div class="container top-pad-10">
                <div class="control">
                    <input class="input is-rounded" type="text" name="password" placeholder="password">
                </div>
            </div>
            <div class="container top-pad-10">
                <div class="control">
                    <input class="input is-rounded" type="text" name="password_confirm" placeholder="re-type password">
                </div>
            </div>
            <div class="container top-pad-10">
                <div class="control">
                    <input class="input is-rounded" type="hidden" name="steamid" value="{{ playerinfo['steamid'] }}">
                </div>
            </div>
            <div class="container top-pad-10">
                <div class="control">
                    <div class="select">
                        <select name="timezone">
                        {% for each in ui_gettimezones() %}
                        <option>{{ each }}</option>
                        {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
                <div class="container top-pad-10">
                    <div class="control">
                        <center><button class="button is-info" type="submit" name="Create User" label="Create User">Create User
                            </button></center>
                    </div>
                </div>
</div>
    </form>
</div>
{% endblock %}

